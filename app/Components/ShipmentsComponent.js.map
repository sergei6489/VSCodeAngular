{"version":3,"sources":["Components/ShipmentsComponent.ts"],"names":[],"mappings":"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","file":"Components/ShipmentsComponent.js","sourcesContent":["///<reference path=\"../typings/tsd.d.ts\" />\r\nimport {ROUTER_DIRECTIVES} from \"@angular/router\";\r\nimport {Component, ViewChild, OnInit} from '@angular/core';\r\nimport { Shipment, Direction } from '../ViewModels/ShipmentViewModel';\r\nimport {ShipmentDetailComponent} from '../Components/shipmentDetailComponent';\r\nimport { ShipmentEditComponent } from '../Components/shipmentEditComponent';\r\nimport {SearchControl} from '../HelpControls/SearchControl';\r\nimport { ShipmentService } from \"../Services/ShipmentService\";\r\nimport { SearchViewModel } from \"../ViewModels/SearchViewModel\";\r\nimport { PagerShipmentsViewModel } from \"../ViewModels/PagerShipmentsViewModel\";\r\nimport { DateTimeControl } from \"../HelpControls/DateTimeControl\";\r\nimport { MdButton } from \"@angular2-material/button\"\r\nimport { MD_PROGRESS_CIRCLE_DIRECTIVES} from \"@angular2-material/progress-circle\";\r\nimport { MD_CHECKBOX_DIRECTIVES } from \"@angular2-material/checkbox\";\r\nimport {MD_CARD_DIRECTIVES} from \"@angular2-material/card\";\r\n\r\n@Component({\r\n    selector: \"testProject\",\r\n    providers: [ShipmentService, SearchViewModel ],\r\n    templateUrl: \"app/partials/Main.html\",\r\n    directives: [MD_CARD_DIRECTIVES,MdButton, MD_CHECKBOX_DIRECTIVES, MD_PROGRESS_CIRCLE_DIRECTIVES, ShipmentDetailComponent, ShipmentEditComponent, SearchControl, DateTimeControl, ROUTER_DIRECTIVES]\r\n})\r\n\r\nexport class ShipmentsComponent implements OnInit {\r\n    @ViewChild(\"shipmentDetail\") detail: ShipmentDetailComponent;\r\n    @ViewChild(\"shipmentEdit\") edit: ShipmentEditComponent;\r\n    shipments: Array<Shipment> = [];\r\n    errorText: string;\r\n    isLoad: boolean;\r\n\r\n    ngOnInit() {\r\n        this.init();\r\n    }\r\n\r\n    constructor(public service: ShipmentService, public search: SearchViewModel) {\r\n\r\n    }\r\n\r\n    init() {\r\n        this.shipments = [];\r\n        this.search = new SearchViewModel();\r\n        this.search.pageIndex = 1;\r\n        this.search.pageCount = 0;\r\n        this.search.highestPrice = 1000;\r\n        this.search.smallestPrice = 10;\r\n        this.search.itemCount = 8;\r\n        this.search.departureDate = null;\r\n        this.search.returnDate = null;\r\n        this.Search();\r\n    }\r\n\r\n    Search() {\r\n        this.shipments = [];\r\n        this.isLoad = true;\r\n        var self = this;\r\n        setTimeout(function () {\r\n            self.service.getShipments(self.search).\r\n                subscribe(res => {\r\n                    res.Result.forEach((data: Shipment) => {\r\n                        self.shipments.push(new Shipment(data.id, data.from, data.to, new Date(data.dateTimeOut), new Date(data.dateTimeInput), data.places, data.price));\r\n                    });\r\n                    self.search.pageCount = res.PageCount;\r\n                    self.isLoad = false;\r\n                }, error => { self.errorText = error; self.isLoad = false; });\r\n        },2000);\r\n\r\n    }\r\n\r\n    previewPage() {\r\n        if (this.search.pageIndex > 0 && this.search.pageIndex < this.search.pageCount - 1) {\r\n            this.search.pageIndex--;\r\n            this.Search();\r\n        }\r\n    }\r\n\r\n    nextPage() {\r\n        if (this.search.pageIndex < this.search.pageCount) {\r\n            this.search.pageIndex++;\r\n            this.Search();\r\n        }\r\n    }\r\n\r\n    // показать детальную информацию по маршруту\r\n    ShowInfo(shipment: Shipment) {\r\n        this.detail.OnShowDialog(shipment);\r\n    }\r\n\r\n    EditInfo(shipment: Shipment) {\r\n        this.edit.OnShowDialog(shipment);\r\n    }\r\n}"],"sourceRoot":"/source/"}